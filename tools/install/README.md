#### share/manifest.json

The manifest for the latest version of conductance.

To make a new release, increment the toplevel `version`,
plus the versions / URLs for any updated components.

Don't update the toplevel `format` field, that's for
incompatible changes to the self-update script (to stop
old clients trying to interpret a manifest file they
can't handle). Notes about the format history are in
./share/self-update.js

manifest-v{1,2}.json are both generated from this. They are
actually identical (except for the `format` field), but are
separated in the event we need to present a different manifest
to different client versions. For reference, v2 of the self-updater
first appeared in 0.4 (the first windows release), March 2014.

# Testing:

To run the acceptance tests for the installer, you need to have an
SSH-accessible host (real or VM) for each platform. See
./test/hosts.sjs to add your own hosts. If you haven't defined a
host for a given platform, tests for that platform will be skipped.

The only requirements for each platform are:

 - ZeroInstall
 - SSH server with passwordless SSH setup for your test user

# npm dependencies

Prebuilt binary dependencies for each platform (plus a set of portable deps)
are generated by
../package-deps (build.sjs)

NOTE: this script explicitly spells out dependencies in a few categories.
There is no automated checking to ensure that e.g. packages in the "portable"
category include no native code.

This uses the same host information as the above tests, so you'll
need access to each supported platform to build a full set of native
deps. You'll also need to install whatever build tools `npm` / `gyp`
requires - errors should tell you what you're missing.

The build script takes the current version of nodejs from
share/manifest.json, so make sure that is updated *before* building
deps. It also builds the *exact* version of npm deps from your
conductance workspace, for consistency.

Once a new set of binary dependencies are built:
 - copy it into a new numbered directory of https://github.com/onilabs/conductance-deps/deps,
    e.g. `cp -a dist <path/to/repo>/deps/2`
 - in the root of that repo, run `gup` to update the manifests (for auditing)
 - verify the git diff (manifest/* will show the package changes since last release)
 - push it
 - update the URLs in manifest.json to point to this new directory

