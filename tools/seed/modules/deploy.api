@deploy  = require('./deploy');
@env = require('mho:env');

var ANONYMOUS = new @deploy.User('local', null);

exports.authenticate = function(user, password) {
  if (user !== password) {
    // XXX actual authentication ;)
    return false;
  }
  return @deploy.Api(new @deploy.User(123, user));
};

if (@env.get('anonymous-access', false) === true) {
  // provide an anonymous API if the server allows it
  exports.anonymous = @deploy.Api(ANONYMOUS);
}
